<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Multithreading là gì?\rMultithreading là khả năng thực thi nhiều threads (luồng) đồng thời trong một chương trình. Mỗi thread là một đơn vị thực thi độc lập, giúp tận dụng tối đa CPU và cải thiện performance.\nTại sao cần Multithreading?\r// ❌ Single thread - chậm downloadFile(&#34;file1.zip&#34;); // 5 giây downloadFile(&#34;file2.zip&#34;); // 5 giây downloadFile(&#34;file3.zip&#34;); // 5 giây // Tổng: 15 giây // ✅ Multi threads - nhanh Thread t1 = new Thread(() -&gt; downloadFile(&#34;file1.zip&#34;)); Thread t2 = new Thread(() -&gt; downloadFile(&#34;file2.zip&#34;)); Thread t3 = new Thread(() -&gt; downloadFile(&#34;file3.zip&#34;)); t1.start(); t2.start(); t3.start(); // Tổng: ~5 giây (download song song) Cách tạo Thread\r1. Extend Thread class\rclass MyThread extends Thread { @Override public void run() { System.out.println(&#34;Thread đang chạy: &#34; + Thread.currentThread().getName()); for (int i = 0; i &lt; 5; i++) { System.out.println(i); try { Thread.sleep(1000); // Sleep 1 giây } catch (InterruptedException e) { e.printStackTrace(); } } } } // Sử dụng MyThread thread = new MyThread(); thread.start(); // Gọi start(), KHÔNG phải run() 2. Implement Runnable interface (Khuyên dùng)\rclass MyRunnable implements Runnable { @Override public void run() { System.out.println(&#34;Runnable đang chạy&#34;); } } // Sử dụng Thread thread = new Thread(new MyRunnable()); thread.start(); // Hoặc dùng lambda (Java 8+) Thread thread = new Thread(() -&gt; { System.out.println(&#34;Lambda runnable&#34;); }); thread.start(); Tại sao ưu tiên Runnable?\n">
<title>Multithreading trong Java: Lập Trình Đa Luồng Hiệu Quả</title>

<link rel='canonical' href='http://localhost:1313/posts/multithreading-trong-java-lap-trinh-da-luong-hieu-qua/'>

<link rel="stylesheet" href="/scss/style.min.b9e9128fec450ebccecc4ec9900157f32b85d0609bcd5ee3293968bcaa1235f2.css"><meta property='og:title' content="Multithreading trong Java: Lập Trình Đa Luồng Hiệu Quả">
<meta property='og:description' content="Multithreading là gì?\rMultithreading là khả năng thực thi nhiều threads (luồng) đồng thời trong một chương trình. Mỗi thread là một đơn vị thực thi độc lập, giúp tận dụng tối đa CPU và cải thiện performance.\nTại sao cần Multithreading?\r// ❌ Single thread - chậm downloadFile(&#34;file1.zip&#34;); // 5 giây downloadFile(&#34;file2.zip&#34;); // 5 giây downloadFile(&#34;file3.zip&#34;); // 5 giây // Tổng: 15 giây // ✅ Multi threads - nhanh Thread t1 = new Thread(() -&gt; downloadFile(&#34;file1.zip&#34;)); Thread t2 = new Thread(() -&gt; downloadFile(&#34;file2.zip&#34;)); Thread t3 = new Thread(() -&gt; downloadFile(&#34;file3.zip&#34;)); t1.start(); t2.start(); t3.start(); // Tổng: ~5 giây (download song song) Cách tạo Thread\r1. Extend Thread class\rclass MyThread extends Thread { @Override public void run() { System.out.println(&#34;Thread đang chạy: &#34; + Thread.currentThread().getName()); for (int i = 0; i &lt; 5; i++) { System.out.println(i); try { Thread.sleep(1000); // Sleep 1 giây } catch (InterruptedException e) { e.printStackTrace(); } } } } // Sử dụng MyThread thread = new MyThread(); thread.start(); // Gọi start(), KHÔNG phải run() 2. Implement Runnable interface (Khuyên dùng)\rclass MyRunnable implements Runnable { @Override public void run() { System.out.println(&#34;Runnable đang chạy&#34;); } } // Sử dụng Thread thread = new Thread(new MyRunnable()); thread.start(); // Hoặc dùng lambda (Java 8+) Thread thread = new Thread(() -&gt; { System.out.println(&#34;Lambda runnable&#34;); }); thread.start(); Tại sao ưu tiên Runnable?\n">
<meta property='og:url' content='http://localhost:1313/posts/multithreading-trong-java-lap-trinh-da-luong-hieu-qua/'>
<meta property='og:site_name' content='Khar34&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts' /><meta property='article:tag' content='Java' /><meta property='article:tag' content='Multithreading' /><meta property='article:tag' content='Concurrency' /><meta property='article:tag' content='Thread' /><meta property='article:tag' content='Parallel' /><meta property='article:published_time' content='2025-12-25T13:00:00&#43;07:00'/><meta property='article:modified_time' content='2025-12-25T13:00:00&#43;07:00'/>
<meta name="twitter:title" content="Multithreading trong Java: Lập Trình Đa Luồng Hiệu Quả">
<meta name="twitter:description" content="Multithreading là gì?\rMultithreading là khả năng thực thi nhiều threads (luồng) đồng thời trong một chương trình. Mỗi thread là một đơn vị thực thi độc lập, giúp tận dụng tối đa CPU và cải thiện performance.\nTại sao cần Multithreading?\r// ❌ Single thread - chậm downloadFile(&#34;file1.zip&#34;); // 5 giây downloadFile(&#34;file2.zip&#34;); // 5 giây downloadFile(&#34;file3.zip&#34;); // 5 giây // Tổng: 15 giây // ✅ Multi threads - nhanh Thread t1 = new Thread(() -&gt; downloadFile(&#34;file1.zip&#34;)); Thread t2 = new Thread(() -&gt; downloadFile(&#34;file2.zip&#34;)); Thread t3 = new Thread(() -&gt; downloadFile(&#34;file3.zip&#34;)); t1.start(); t2.start(); t3.start(); // Tổng: ~5 giây (download song song) Cách tạo Thread\r1. Extend Thread class\rclass MyThread extends Thread { @Override public void run() { System.out.println(&#34;Thread đang chạy: &#34; + Thread.currentThread().getName()); for (int i = 0; i &lt; 5; i++) { System.out.println(i); try { Thread.sleep(1000); // Sleep 1 giây } catch (InterruptedException e) { e.printStackTrace(); } } } } // Sử dụng MyThread thread = new MyThread(); thread.start(); // Gọi start(), KHÔNG phải run() 2. Implement Runnable interface (Khuyên dùng)\rclass MyRunnable implements Runnable { @Override public void run() { System.out.println(&#34;Runnable đang chạy&#34;); } } // Sử dụng Thread thread = new Thread(new MyRunnable()); thread.start(); // Hoặc dùng lambda (Java 8+) Thread thread = new Thread(() -&gt; { System.out.println(&#34;Lambda runnable&#34;); }); thread.start(); Tại sao ưu tiên Runnable?\n">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column compact"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_5efb6e76a8135b55.png" width="300"
                            height="222" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Khar34&#39;s Blog</a></h1>
            <h2 class="site-description"></h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    

            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/java/" >
                Java
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/posts/multithreading-trong-java-lap-trinh-da-luong-hieu-qua/">Multithreading trong Java: Lập Trình Đa Luồng Hiệu Quả</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published" datetime='2025-12-25T13:00:00&#43;07:00'>Dec 25, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    7 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="multithreading-là-gì">Multithreading là gì?
</h2><p><strong>Multithreading</strong> là khả năng thực thi nhiều threads (luồng) đồng thời trong một chương trình. Mỗi thread là một đơn vị thực thi độc lập, giúp tận dụng tối đa CPU và cải thiện performance.</p>
<h2 id="tại-sao-cần-multithreading">Tại sao cần Multithreading?
</h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// ❌ Single thread - chậm</span>
</span></span><span style="display:flex;"><span>downloadFile(<span style="color:#e6db74">&#34;file1.zip&#34;</span>);  <span style="color:#75715e">// 5 giây</span>
</span></span><span style="display:flex;"><span>downloadFile(<span style="color:#e6db74">&#34;file2.zip&#34;</span>);  <span style="color:#75715e">// 5 giây</span>
</span></span><span style="display:flex;"><span>downloadFile(<span style="color:#e6db74">&#34;file3.zip&#34;</span>);  <span style="color:#75715e">// 5 giây</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Tổng: 15 giây</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ✅ Multi threads - nhanh</span>
</span></span><span style="display:flex;"><span>Thread t1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> downloadFile(<span style="color:#e6db74">&#34;file1.zip&#34;</span>));
</span></span><span style="display:flex;"><span>Thread t2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> downloadFile(<span style="color:#e6db74">&#34;file2.zip&#34;</span>));
</span></span><span style="display:flex;"><span>Thread t3 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> downloadFile(<span style="color:#e6db74">&#34;file3.zip&#34;</span>));
</span></span><span style="display:flex;"><span>t1.<span style="color:#a6e22e">start</span>(); t2.<span style="color:#a6e22e">start</span>(); t3.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Tổng: ~5 giây (download song song)</span>
</span></span></code></pre></div><h2 id="cách-tạo-thread">Cách tạo Thread
</h2><h3 id="1-extend-thread-class">1. Extend Thread class
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyThread</span> <span style="color:#66d9ef">extends</span> Thread {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Thread đang chạy: &#34;</span> <span style="color:#f92672">+</span> Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getName</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 5; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(i);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                Thread.<span style="color:#a6e22e">sleep</span>(1000); <span style="color:#75715e">// Sleep 1 giây</span>
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (InterruptedException e) {
</span></span><span style="display:flex;"><span>                e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Sử dụng</span>
</span></span><span style="display:flex;"><span>MyThread thread <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyThread();
</span></span><span style="display:flex;"><span>thread.<span style="color:#a6e22e">start</span>(); <span style="color:#75715e">// Gọi start(), KHÔNG phải run()</span>
</span></span></code></pre></div><h3 id="2-implement-runnable-interface-khuyên-dùng">2. Implement Runnable interface (Khuyên dùng)
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyRunnable</span> <span style="color:#66d9ef">implements</span> Runnable {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Runnable đang chạy&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Sử dụng</span>
</span></span><span style="display:flex;"><span>Thread thread <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(<span style="color:#66d9ef">new</span> MyRunnable());
</span></span><span style="display:flex;"><span>thread.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hoặc dùng lambda (Java 8+)</span>
</span></span><span style="display:flex;"><span>Thread thread <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Lambda runnable&#34;</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>thread.<span style="color:#a6e22e">start</span>();
</span></span></code></pre></div><p><strong>Tại sao ưu tiên Runnable?</strong></p>
<ul>
<li>Java không hỗ trợ multiple inheritance</li>
<li>Tách logic khỏi thread management</li>
<li>Dễ test hơn</li>
</ul>
<h3 id="3-callable-và-future">3. Callable và Future
</h3><p>Trả về kết quả và có thể throw exception:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Callable<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> task <span style="color:#f92672">=</span> () <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>    Thread.<span style="color:#a6e22e">sleep</span>(2000);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> 42;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ExecutorService executor <span style="color:#f92672">=</span> Executors.<span style="color:#a6e22e">newSingleThreadExecutor</span>();
</span></span><span style="display:flex;"><span>Future<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> future <span style="color:#f92672">=</span> executor.<span style="color:#a6e22e">submit</span>(task);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Làm việc khác...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>    Integer result <span style="color:#f92672">=</span> future.<span style="color:#a6e22e">get</span>(); <span style="color:#75715e">// Chờ kết quả</span>
</span></span><span style="display:flex;"><span>    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Result: &#34;</span> <span style="color:#f92672">+</span> result);
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">catch</span> (InterruptedException <span style="color:#f92672">|</span> ExecutionException e) {
</span></span><span style="display:flex;"><span>    e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>executor.<span style="color:#a6e22e">shutdown</span>();
</span></span></code></pre></div><h2 id="thread-lifecycle">Thread Lifecycle
</h2><pre tabindex="0"><code>NEW → RUNNABLE → RUNNING → TERMINATED
       ↓           ↑
       ← BLOCKED ←
       ← WAITING ←
       ← TIMED_WAITING ←
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Thread thread <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> {});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// NEW</span>
</span></span><span style="display:flex;"><span>System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(thread.<span style="color:#a6e22e">getState</span>()); <span style="color:#75715e">// NEW</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>thread.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// RUNNABLE</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>thread.<span style="color:#a6e22e">join</span>(); <span style="color:#75715e">// Chờ thread kết thúc</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// TERMINATED</span>
</span></span></code></pre></div><h2 id="thread-methods">Thread Methods
</h2><h3 id="join">join()
</h3><p>Chờ thread kết thúc:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Thread t1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        Thread.<span style="color:#a6e22e">sleep</span>(2000);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;T1 done&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (InterruptedException e) {}
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>t1.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>t1.<span style="color:#a6e22e">join</span>(); <span style="color:#75715e">// Main thread chờ t1 xong</span>
</span></span><span style="display:flex;"><span>System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Main continues&#34;</span>);
</span></span></code></pre></div><h3 id="sleep">sleep()
</h3><p>Tạm dừng thread:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>    Thread.<span style="color:#a6e22e">sleep</span>(2000); <span style="color:#75715e">// Sleep 2 giây</span>
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">catch</span> (InterruptedException e) {
</span></span><span style="display:flex;"><span>    e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="interrupt">interrupt()
</h3><p>Gửi tín hiệu interrupt:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Thread thread <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span>Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">isInterrupted</span>()) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Working...&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            Thread.<span style="color:#a6e22e">sleep</span>(1000);
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (InterruptedException e) {
</span></span><span style="display:flex;"><span>            Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">interrupt</span>(); <span style="color:#75715e">// Restore interrupt status</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>thread.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>Thread.<span style="color:#a6e22e">sleep</span>(3000);
</span></span><span style="display:flex;"><span>thread.<span style="color:#a6e22e">interrupt</span>(); <span style="color:#75715e">// Dừng thread</span>
</span></span></code></pre></div><h2 id="synchronization">Synchronization
</h2><h3 id="vấn-đề-race-condition">Vấn đề: Race Condition
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Counter</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> 0;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">increment</span>() {
</span></span><span style="display:flex;"><span>        count<span style="color:#f92672">++</span>; <span style="color:#75715e">// KHÔNG thread-safe!</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCount</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> count;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Race condition</span>
</span></span><span style="display:flex;"><span>Counter counter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Counter();
</span></span><span style="display:flex;"><span>Thread t1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 1000; i<span style="color:#f92672">++</span>) counter.<span style="color:#a6e22e">increment</span>();
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>Thread t2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 1000; i<span style="color:#f92672">++</span>) counter.<span style="color:#a6e22e">increment</span>();
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>t1.<span style="color:#a6e22e">start</span>(); t2.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>t1.<span style="color:#a6e22e">join</span>(); t2.<span style="color:#a6e22e">join</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(counter.<span style="color:#a6e22e">getCount</span>()); <span style="color:#75715e">// Có thể &lt; 2000!</span>
</span></span></code></pre></div><h3 id="giải-pháp-1-synchronized-method">Giải pháp 1: synchronized method
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Counter</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> 0;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">synchronized</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">increment</span>() {
</span></span><span style="display:flex;"><span>        count<span style="color:#f92672">++</span>; <span style="color:#75715e">// Thread-safe</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">synchronized</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCount</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> count;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="giải-pháp-2-synchronized-block">Giải pháp 2: synchronized block
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Counter</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> 0;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> Object lock <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Object();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">increment</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">synchronized</span> (lock) {
</span></span><span style="display:flex;"><span>            count<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="giải-pháp-3-atomic-classes">Giải pháp 3: Atomic classes
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.atomic.AtomicInteger;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Counter</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> AtomicInteger count <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> AtomicInteger(0);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">increment</span>() {
</span></span><span style="display:flex;"><span>        count.<span style="color:#a6e22e">incrementAndGet</span>(); <span style="color:#75715e">// Thread-safe, không cần synchronized</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCount</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> count.<span style="color:#a6e22e">get</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="deadlock">Deadlock
</h2><p>Hai threads chờ nhau mãi mãi:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// ❌ Deadlock example</span>
</span></span><span style="display:flex;"><span>Object lock1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Object();
</span></span><span style="display:flex;"><span>Object lock2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Object();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Thread t1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">synchronized</span> (lock1) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;T1: holding lock1&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> { Thread.<span style="color:#a6e22e">sleep</span>(100); } <span style="color:#66d9ef">catch</span> (InterruptedException e) {}
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">synchronized</span> (lock2) { <span style="color:#75715e">// Chờ lock2</span>
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;T1: holding lock1 &amp; lock2&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Thread t2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">synchronized</span> (lock2) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;T2: holding lock2&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> { Thread.<span style="color:#a6e22e">sleep</span>(100); } <span style="color:#66d9ef">catch</span> (InterruptedException e) {}
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">synchronized</span> (lock1) { <span style="color:#75715e">// Chờ lock1</span>
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;T2: holding lock1 &amp; lock2&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>t1.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>t2.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// DEADLOCK! Cả 2 threads đều bị block</span>
</span></span></code></pre></div><p><strong>Tránh deadlock:</strong> Lock theo thứ tự nhất quán:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// ✅ Luôn lock theo thứ tự: lock1 → lock2</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">synchronized</span> (lock1) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">synchronized</span> (lock2) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Safe</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="executorservice">ExecutorService
</h2><p>Framework quản lý thread pool hiệu quả:</p>
<h3 id="fixed-thread-pool">Fixed Thread Pool
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>ExecutorService executor <span style="color:#f92672">=</span> Executors.<span style="color:#a6e22e">newFixedThreadPool</span>(5);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 10; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> taskId <span style="color:#f92672">=</span> i;
</span></span><span style="display:flex;"><span>    executor.<span style="color:#a6e22e">submit</span>(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Task &#34;</span> <span style="color:#f92672">+</span> taskId <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; by &#34;</span> <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>            Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getName</span>());
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>executor.<span style="color:#a6e22e">shutdown</span>();
</span></span><span style="display:flex;"><span>executor.<span style="color:#a6e22e">awaitTermination</span>(1, TimeUnit.<span style="color:#a6e22e">MINUTES</span>);
</span></span></code></pre></div><h3 id="cached-thread-pool">Cached Thread Pool
</h3><p>Tạo threads on-demand:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>ExecutorService executor <span style="color:#f92672">=</span> Executors.<span style="color:#a6e22e">newCachedThreadPool</span>();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Tự động tạo/tái sử dụng threads</span>
</span></span></code></pre></div><h3 id="single-thread-executor">Single Thread Executor
</h3><p>Đảm bảo tasks chạy tuần tự:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>ExecutorService executor <span style="color:#f92672">=</span> Executors.<span style="color:#a6e22e">newSingleThreadExecutor</span>();
</span></span></code></pre></div><h3 id="scheduled-thread-pool">Scheduled Thread Pool
</h3><p>Chạy tasks định kỳ:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>ScheduledExecutorService scheduler <span style="color:#f92672">=</span> Executors.<span style="color:#a6e22e">newScheduledThreadPool</span>(1);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Chạy sau 2 giây</span>
</span></span><span style="display:flex;"><span>scheduler.<span style="color:#a6e22e">schedule</span>(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Executed after 2s&#34;</span>);
</span></span><span style="display:flex;"><span>}, 2, TimeUnit.<span style="color:#a6e22e">SECONDS</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Chạy mỗi 1 giây</span>
</span></span><span style="display:flex;"><span>scheduler.<span style="color:#a6e22e">scheduleAtFixedRate</span>(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Tick&#34;</span>);
</span></span><span style="display:flex;"><span>}, 0, 1, TimeUnit.<span style="color:#a6e22e">SECONDS</span>);
</span></span></code></pre></div><h2 id="concurrent-collections">Concurrent Collections
</h2><p>Thread-safe collections:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// ConcurrentHashMap</span>
</span></span><span style="display:flex;"><span>Map<span style="color:#f92672">&lt;</span>String, Integer<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ConcurrentHashMap<span style="color:#f92672">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>map.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">&#34;key&#34;</span>, 1);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// CopyOnWriteArrayList</span>
</span></span><span style="display:flex;"><span>List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> list <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> CopyOnWriteArrayList<span style="color:#f92672">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>list.<span style="color:#a6e22e">add</span>(<span style="color:#e6db74">&#34;item&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// BlockingQueue</span>
</span></span><span style="display:flex;"><span>BlockingQueue<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> queue <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedBlockingQueue<span style="color:#f92672">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>queue.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">&#34;item&#34;</span>); <span style="color:#75715e">// Block nếu full</span>
</span></span><span style="display:flex;"><span>String item <span style="color:#f92672">=</span> queue.<span style="color:#a6e22e">take</span>(); <span style="color:#75715e">// Block nếu empty</span>
</span></span></code></pre></div><h2 id="completablefuture-java-8">CompletableFuture (Java 8+)
</h2><p>Async programming hiện đại:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Async task</span>
</span></span><span style="display:flex;"><span>CompletableFuture<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> future <span style="color:#f92672">=</span> CompletableFuture.<span style="color:#a6e22e">supplyAsync</span>(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        Thread.<span style="color:#a6e22e">sleep</span>(2000);
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (InterruptedException e) {}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Result&#34;</span>;
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Chain operations</span>
</span></span><span style="display:flex;"><span>future.<span style="color:#a6e22e">thenApply</span>(result <span style="color:#f92672">-&gt;</span> result.<span style="color:#a6e22e">toUpperCase</span>())
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">thenAccept</span>(result <span style="color:#f92672">-&gt;</span> System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(result))
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">exceptionally</span>(ex <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>          System.<span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Error: &#34;</span> <span style="color:#f92672">+</span> ex);
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Combine multiple futures</span>
</span></span><span style="display:flex;"><span>CompletableFuture<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> future1 <span style="color:#f92672">=</span> CompletableFuture.<span style="color:#a6e22e">supplyAsync</span>(() <span style="color:#f92672">-&gt;</span> 10);
</span></span><span style="display:flex;"><span>CompletableFuture<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> future2 <span style="color:#f92672">=</span> CompletableFuture.<span style="color:#a6e22e">supplyAsync</span>(() <span style="color:#f92672">-&gt;</span> 20);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>CompletableFuture<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> combined <span style="color:#f92672">=</span> future1.<span style="color:#a6e22e">thenCombine</span>(future2, (a, b) <span style="color:#f92672">-&gt;</span> a <span style="color:#f92672">+</span> b);
</span></span><span style="display:flex;"><span>System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(combined.<span style="color:#a6e22e">get</span>()); <span style="color:#75715e">// 30</span>
</span></span></code></pre></div><h2 id="ví-dụ-thực-tế">Ví dụ thực tế
</h2><h3 id="1-download-nhiều-files-song-song">1. Download nhiều files song song
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ParallelDownloader</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> ExecutorService executor <span style="color:#f92672">=</span> Executors.<span style="color:#a6e22e">newFixedThreadPool</span>(5);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">downloadFiles</span>(List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> urls) {
</span></span><span style="display:flex;"><span>        List<span style="color:#f92672">&lt;</span>Future<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;&gt;</span> futures <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (String url : urls) {
</span></span><span style="display:flex;"><span>            Future<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> future <span style="color:#f92672">=</span> executor.<span style="color:#a6e22e">submit</span>(() <span style="color:#f92672">-&gt;</span> downloadFile(url));
</span></span><span style="display:flex;"><span>            futures.<span style="color:#a6e22e">add</span>(future);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Chờ tất cả download xong</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (Future<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> future : futures) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                String result <span style="color:#f92672">=</span> future.<span style="color:#a6e22e">get</span>();
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Downloaded: &#34;</span> <span style="color:#f92672">+</span> result);
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>                e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        executor.<span style="color:#a6e22e">shutdown</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String <span style="color:#a6e22e">downloadFile</span>(String url) <span style="color:#66d9ef">throws</span> InterruptedException {
</span></span><span style="display:flex;"><span>        Thread.<span style="color:#a6e22e">sleep</span>(2000); <span style="color:#75715e">// Simulate download</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> url;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="2-producer-consumer-với-blockingqueue">2. Producer-Consumer với BlockingQueue
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ProducerConsumer</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> BlockingQueue<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> queue <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedBlockingQueue<span style="color:#f92672">&lt;&gt;</span>(10);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Producer</span> <span style="color:#66d9ef">implements</span> Runnable {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 20; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>                    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Producing: &#34;</span> <span style="color:#f92672">+</span> i);
</span></span><span style="display:flex;"><span>                    queue.<span style="color:#a6e22e">put</span>(i); <span style="color:#75715e">// Block nếu queue full</span>
</span></span><span style="display:flex;"><span>                    Thread.<span style="color:#a6e22e">sleep</span>(100);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (InterruptedException e) {}
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Consumer</span> <span style="color:#66d9ef">implements</span> Runnable {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">true</span>) {
</span></span><span style="display:flex;"><span>                    Integer item <span style="color:#f92672">=</span> queue.<span style="color:#a6e22e">take</span>(); <span style="color:#75715e">// Block nếu queue empty</span>
</span></span><span style="display:flex;"><span>                    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Consuming: &#34;</span> <span style="color:#f92672">+</span> item);
</span></span><span style="display:flex;"><span>                    Thread.<span style="color:#a6e22e">sleep</span>(200);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (InterruptedException e) {}
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">start</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">new</span> Thread(<span style="color:#66d9ef">new</span> Producer()).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">new</span> Thread(<span style="color:#66d9ef">new</span> Consumer()).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="3-parallel-stream">3. Parallel Stream
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> numbers <span style="color:#f92672">=</span> Arrays.<span style="color:#a6e22e">asList</span>(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Sequential</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> sum <span style="color:#f92672">=</span> numbers.<span style="color:#a6e22e">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">map</span>(n <span style="color:#f92672">-&gt;</span> n <span style="color:#f92672">*</span> 2)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">reduce</span>(0, Integer::sum);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Parallel</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> parallelSum <span style="color:#f92672">=</span> numbers.<span style="color:#a6e22e">parallelStream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">map</span>(n <span style="color:#f92672">-&gt;</span> n <span style="color:#f92672">*</span> 2)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">reduce</span>(0, Integer::sum);
</span></span></code></pre></div><h3 id="4-cache-với-double-checked-locking">4. Cache với Double-Checked Locking
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Singleton</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">volatile</span> Singleton instance;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#a6e22e">Singleton</span>() {}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Singleton <span style="color:#a6e22e">getInstance</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (instance <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span>) { <span style="color:#75715e">// First check (no locking)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">synchronized</span> (Singleton.<span style="color:#a6e22e">class</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (instance <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span>) { <span style="color:#75715e">// Second check (with locking)</span>
</span></span><span style="display:flex;"><span>                    instance <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Singleton();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> instance;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="best-practices">Best Practices
</h2><ol>
<li><strong>Dùng ExecutorService thay vì tạo Thread thủ công</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// ❌ BAD</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> doWork()).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ✅ GOOD</span>
</span></span><span style="display:flex;"><span>executor.<span style="color:#a6e22e">submit</span>(() <span style="color:#f92672">-&gt;</span> doWork());
</span></span></code></pre></div><ol start="2">
<li><strong>Luôn shutdown ExecutorService</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Submit tasks</span>
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">finally</span> {
</span></span><span style="display:flex;"><span>    executor.<span style="color:#a6e22e">shutdown</span>();
</span></span><span style="display:flex;"><span>    executor.<span style="color:#a6e22e">awaitTermination</span>(60, TimeUnit.<span style="color:#a6e22e">SECONDS</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol start="3">
<li><strong>Dùng concurrent collections</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// ✅ Thread-safe</span>
</span></span><span style="display:flex;"><span>Map<span style="color:#f92672">&lt;</span>String, Integer<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ConcurrentHashMap<span style="color:#f92672">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ❌ Không thread-safe</span>
</span></span><span style="display:flex;"><span>Map<span style="color:#f92672">&lt;</span>String, Integer<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;</span>();
</span></span></code></pre></div><ol start="4">
<li><strong>Tránh synchronized quá mức</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// ❌ Lock toàn bộ method</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">synchronized</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">doWork</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Expensive operation</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ✅ Lock chỉ phần cần thiết</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">doWork</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Non-critical code</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">synchronized</span> (lock) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Critical section only</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol start="5">
<li><strong>Sử dụng volatile cho flags</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">volatile</span> <span style="color:#66d9ef">boolean</span> running <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">stop</span>() {
</span></span><span style="display:flex;"><span>    running <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>; <span style="color:#75715e">// Visible to all threads</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="kết-luận">Kết luận
</h2><p>Multithreading trong Java:</p>
<ul>
<li>Tăng performance với parallel processing</li>
<li>Cần cẩn thận về race conditions và deadlocks</li>
<li>ExecutorService giúp quản lý threads hiệu quả</li>
<li>Concurrent collections cho thread-safety</li>
<li>CompletableFuture cho async programming hiện đại</li>
</ul>
<p>Nắm vững multithreading giúp bạn xây dựng ứng dụng Java scalable và hiệu suất cao!</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/java/">Java</a>
        
            <a href="/tags/multithreading/">Multithreading</a>
        
            <a href="/tags/concurrency/">Concurrency</a>
        
            <a href="/tags/thread/">Thread</a>
        
            <a href="/tags/parallel/">Parallel</a>
        
    </section>


    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/posts/collections-framework-trong-java-lam-chu-cau-truc-du-lieu/">
        
        

        <div class="article-details">
            <h2 class="article-title">Collections Framework trong Java: Làm Chủ Cấu Trúc Dữ Liệu</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/exception-handling-trong-java-xu-ly-loi-chuyen-nghiep/">
        
        

        <div class="article-details">
            <h2 class="article-title">Exception Handling trong Java: Xử Lý Lỗi Chuyên Nghiệp</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/dependency-injection-trong-java-hieu-va-ap-dung/">
        
        

        <div class="article-details">
            <h2 class="article-title">Dependency Injection trong Java: Hiểu và Áp Dụng</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 Khar34&#39;s Blog
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.33.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >
    

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.61b9391cbcd5032882c91aa4da78f76296dabb9b1cfb8f23122226ef3802e0c0.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
